(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{10:function(e,t,n){e.exports={"comments-header":"Comments_comments-header__1SR78",comments:"Comments_comments__l4vdx",comment:"Comments_comment__2pQo-",comment__header:"Comments_comment__header__3tf3a",comment__heading:"Comments_comment__heading__2eXbd",comment_timestamp:"Comments_comment_timestamp__3YOTt",comment__body:"Comments_comment__body__oeMdY",comment__textarea:"Comments_comment__textarea__26Fcg",comment__row:"Comments_comment__row__3VD_6",comment__icon_div:"Comments_comment__icon_div__3guXt",comment__text_div:"Comments_comment__text_div__2Jtk6",add_reply_button:"Comments_add_reply_button__1BgiV",save_reply_button:"Comments_save_reply_button__dD7iV",comment__dropdown:"Comments_comment__dropdown__2bwd7"}},16:function(e,t,n){e.exports={"reply-header":"Reply_reply-header__1Giz3",reply:"Reply_reply__2orIj",reply__header:"Reply_reply__header__3QYRh",reply__heading:"Reply_reply__heading__2P_Q5",reply_timestamp:"Reply_reply_timestamp__1jw-7",reply__body:"Reply_reply__body__nrBQR",reply__row:"Reply_reply__row__1ZYn1",reply__icon_div:"Reply_reply__icon_div__27vaC",reply__text_div:"Reply_reply__text_div__3gz1-"}},18:function(e,t,n){e.exports={compose:"Compose_compose__1vYmg",compose__heading:"Compose_compose__heading__1vdqT",compose__body:"Compose_compose__body__2IdV1",compose__textarea:"Compose_compose__textarea__2gflR",compose__dropdown:"Compose_compose__dropdown__2pmBs",compose__button:"Compose_compose__button__1udEb"}},38:function(e,t,n){e.exports=n(69)},49:function(e,t,n){},50:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),s=n.n(c),o=n(12),u=n(9),m=n(37),l=(n(49),n(50),n(15)),_=n(18),i=n.n(_),p=n(3),d=n.n(p),f=n(6),E=n(5),b=n(13),v=n(14),y=n.n(v);function h(){return O.apply(this,arguments)}function O(){return(O=Object(b.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/users");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C="comments/FETCH_COMMENTS",j="replies/FETCH_REPLIES",S=d.a.mark(T),w=d.a.mark(R),x=d.a.mark(F);function N(e){return{type:"users/FETCH_USERS_SUCCESS",payload:e}}var g={isFetching:!1,users:[],selectedUserId:null};function T(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(E.a)(h);case 3:return e=t.sent,t.next=6,Object(E.b)(N(e));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(E.b)({type:"users/FETCH_USERS_FAILURE",payload:t.t0,error:!0});case 12:case"end":return t.stop()}}),S,null,[[0,8]])}function R(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(E.b)("SELECT_USER",e.value);case 2:case"end":return t.stop()}}),w)}function F(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.c)("users/FETCH_USERS",T);case 2:return e.next=4,Object(E.c)("SELECT_USER",R);case 4:case"end":return e.stop()}}),x)}function k(e){return e.users.users}var U=function(){var e=Object(u.b)(),t=Object(u.c)(k);return Object(a.useEffect)((function(){e({type:"users/FETCH_USERS"})}),[e]),{users:t,selectUser:function(t){return e({type:"SELECT_USER",value:t})}}},I=n(22),M=n.n(I);function H(){return L.apply(this,arguments)}function L(){return(L=Object(b.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/comments");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){return A.apply(this,arguments)}function A(){return(A=Object(b.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("/comments",{user_id:t,content:n});case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=d.a.mark(J),Y=d.a.mark(z),B=d.a.mark(X),Q=d.a.mark(G);function V(e){return{type:"comments/FETCH_COMMENTS_SUCCESS",payload:e}}var q={isFetching:!1,comments:[],content:""};function J(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(E.a)(H);case 3:return e=t.sent,t.next=6,Object(E.b)(V(e));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(E.b)({type:"comments/FETCH_COMMENTS_FAILURE",payload:t.t0,error:!0});case 12:case"end":return t.stop()}}),P,null,[[0,8]])}function z(e){var t,n,a;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.userId,a=t.content,r.next=3,Object(E.a)(D,n,a);case 3:return r.next=5,Object(E.a)(J);case 5:case"end":return r.stop()}}),Y)}function X(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(E.b)("SET_COMMENT_CONTENT",e.value);case 2:case"end":return t.stop()}}),B)}function G(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.c)(C,J);case 2:return e.next=4,Object(E.c)("comments/CREATE_COMMENT",z);case 4:return e.next=6,Object(E.c)("SET_COMMENT_CONTENT",X);case 6:case"end":return e.stop()}}),Q)}function Z(e){return e.comments.comments}var K=function(){var e=Object(u.b)(),t=Object(u.c)(Z);return Object(a.useEffect)((function(){e({type:C})}),[e]),{comments:t,createComment:function(t,n){return e(function(e,t){return{type:"comments/CREATE_COMMENT",payload:{userId:e,content:t}}}(t,n))},setCommentContent:function(t){e({type:"SET_COMMENT_CONTENT",value:t})}}},W=function(){var e=U().users,t=K().createComment,n=Object(a.useRef)();Object(a.useEffect)((function(){M()(n.current)}),[]),Object(a.useEffect)((function(){e.length&&u(e[0].id)}),[e]);var c=Object(a.useState)(null),s=Object(l.a)(c,2),o=s[0],u=s[1],m=Object(a.useState)(""),_=Object(l.a)(m,2),p=_[0],d=_[1],f=Object(a.useCallback)((function(e){e.preventDefault(),o?(t(o,p),d("")):alert("No user selected")}),[o,p]);return r.a.createElement("div",{className:i.a.compose},r.a.createElement("h2",{className:i.a.compose__heading},"You say..."),r.a.createElement("form",{className:i.a.compose__body,onSubmit:f},r.a.createElement("textarea",{ref:n,rows:4,placeholder:"Enter some text",required:!0,autoFocus:!0,value:p,onChange:function(e){return d(e.target.value)},className:"compose__textarea"}),r.a.createElement("div",{className:"compose__dropdown"},r.a.createElement("label",{htmlFor:"user-select"},"Comment as"),r.a.createElement("select",{id:"user-select",onChange:function(e){return u(parseInt(e.target.value))},className:"dropdown"},e.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})))),r.a.createElement("div",{className:i.a.compose__button},r.a.createElement("button",{className:"button button--primary"},"Submit"))))},$=n(23),ee=n(10),te=n.n(ee);function ne(){return ae.apply(this,arguments)}function ae(){return(ae=Object(b.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/replies");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e,t,n){return ce.apply(this,arguments)}function ce(){return(ce=Object(b.a)(d.a.mark((function e(t,n,a){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("/replies",{user_id:t,comment_id:n,content:a});case 2:return r=e.sent,c=r.data,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var se=d.a.mark(_e),oe=d.a.mark(ie),ue=d.a.mark(pe);function me(e){return{type:"replies/FETCH_REPLIES_SUCCESS",payload:e}}var le={isFetching:!1,replies:[]};function _e(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(E.a)(ne);case 3:return e=t.sent,t.next=6,Object(E.b)(me(e));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(E.b)({type:"replies/FETCH_REPLIES_FAILURE",payload:t.t0,error:!0});case 12:case"end":return t.stop()}}),se,null,[[0,8]])}function ie(e){var t,n,a,r;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.userId,a=t.commentId,r=t.content,c.next=3,Object(E.a)(re,n,a,r);case 3:return c.next=5,Object(E.a)(_e);case 5:case"end":return c.stop()}}),oe)}function pe(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.c)(j,_e);case 2:return e.next=4,Object(E.c)("replies/CREATE_REPLY",ie);case 4:case"end":return e.stop()}}),ue)}function de(e){return e.replies.replies}var fe=function(){var e=Object(u.b)(),t=Object(u.c)(de);return Object(a.useEffect)((function(){e({type:j})}),[e]),{replies:t,createReply:function(t,n,a){return e(function(e,t,n){return{type:"replies/CREATE_REPLY",payload:{userId:e,commentId:t,content:n}}}(t,n,a))}}},Ee=n(16),be=n.n(Ee),ve=function(e){var t=e.reply,n=U().users;return r.a.createElement("div",{className:be.a.reply},r.a.createElement("header",{className:be.a.reply__header},r.a.createElement("h2",{className:be.a.reply__heading},function(e){for(var t=0;t<n.length;t++)if(n[t].id===e.user_id)return n[t].name}(t)," replied..."),r.a.createElement("span",{className:be.a.comment_timestamp},new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"short"}).format(new Date(t.created_at)))),r.a.createElement("p",{className:be.a.reply__body},t.content))};var ye=function(e){var t=fe().replies;return r.a.createElement("div",null,Object($.a)(t).sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})).filter((function(t){return t.comment_id===e.id})).map((function(e){return r.a.createElement(ve,{reply:e})})))};var he=function(e){var t=U().users,n=fe().createReply,c=Object(a.useState)(!1),s=Object(l.a)(c,2),o=s[0],u=s[1],m=Object(a.useState)(""),_=Object(l.a)(m,2),i=_[0],p=_[1],d=Object(a.useState)(!1),f=Object(l.a)(d,2),E=f[0],b=f[1],v=Object(a.useState)(null),y=Object(l.a)(v,2),h=y[0],O=y[1],C=function(t){return t.id!==e.comment.user_id};Object(a.useEffect)((function(){if(t.length){var e=t.filter(C);O(e[0].id)}}),[t,e.comment.user_id]);var j=Object(a.useCallback)((function(t){h?i?(n(h,e.comment.id,i),p(""),u(!1)):alert("No reply written"):alert("No user selected")}),[h,i,e.comment.id,n]),S=Object(a.useRef)();return Object(a.useEffect)((function(){M()(S.current)}),[]),r.a.createElement("div",{key:e.comment.id,className:te.a.comment},r.a.createElement("header",{className:te.a.comment__header},r.a.createElement("h2",{className:te.a.comment__heading},e.comment.user.name," says..."),r.a.createElement("span",{className:te.a.comment_timestamp},new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"short"}).format(new Date(e.comment.created_at)))),r.a.createElement("p",{className:te.a.comment__body},e.comment.content),r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("button",{className:te.a.add_reply_button,onClick:function(){u(!o)}},r.a.createElement("i",{className:"fa fa-comment"})," Reply"),r.a.createElement("br",null),r.a.createElement("br",null),o&&r.a.createElement("div",null,r.a.createElement("textarea",{ref:S,rows:1,placeholder:"Enter some text",required:!0,autoFocus:!0,onChange:function(e){p(e.target.value),i.length-1||""===i?b(!0):b(!1)},value:i,className:te.a.comment__textarea}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"compose__dropdown"},r.a.createElement("label",{htmlFor:"user-select"},"Comment as"),r.a.createElement("select",{id:"user-select",onChange:function(e){return O(parseInt(e.target.value))},className:"dropdown"},t.filter(C).map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))))),r.a.createElement("div",{className:"col-md-6"},E&&r.a.createElement("button",{className:te.a.save_reply_button,onClick:j},r.a.createElement("i",{className:"fa fa-save"})," Save"))))),r.a.createElement("br",null),r.a.createElement(ye,{id:e.comment.id}))};var Oe=function(){var e=K().comments;return r.a.createElement("div",{className:te.a.comments},Object($.a)(e).sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})).map((function(e){return r.a.createElement(he,{comment:e,key:e.id})})))};var Ce=function(){return r.a.createElement("div",{className:"comments-container"},r.a.createElement("header",{className:"comments-header"},r.a.createElement("h1",null,"Comments")),r.a.createElement(W,null),r.a.createElement(Oe,null))},je=Object(o.c)({comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(f.a)(Object(f.a)({},e),{},{isFetching:!0});case"comments/FETCH_COMMENTS_SUCCESS":return Object(f.a)(Object(f.a)({},e),{},{isFetching:!1,comments:t.payload});case"comments/FETCH_COMMENTS_FAILURE":return Object(f.a)(Object(f.a)({},e),{},{isFetching:!1});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"users/FETCH_USERS":return Object(f.a)(Object(f.a)({},e),{},{isFetching:!0});case"users/FETCH_USERS_SUCCESS":return Object(f.a)(Object(f.a)({},e),{},{isFetching:!1,users:t.payload});case"users/FETCH_USERS_FAILURE":return Object(f.a)(Object(f.a)({},e),{},{isFetching:!1});case"SELECT_USER":return Object(f.a)(Object(f.a)({},e),{},{selectedUserId:t.userId});default:return e}},replies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(f.a)(Object(f.a)({},e),{},{isFetching:!0});case"replies/FETCH_REPLIES_SUCCESS":return Object(f.a)(Object(f.a)({},e),{},{isFetching:!1,replies:t.payload});case"replies/FETCH_REPLIES_FAILURE":return Object(f.a)(Object(f.a)({},e),{},{isFetching:!1});default:return e}}}),Se=[G,F,pe],we=Object(m.a)(),xe=Object(o.e)(je,Object(o.a)(we));Se.forEach((function(e){return we.run(e)})),window.store=xe,s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:xe},r.a.createElement(Ce,null))),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.681b2374.chunk.js.map